// shadow-slide cdn ver 1.0.4
window.W||(window.W=new Array,W.$modules=[]),W.$modules.push(function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t){return{type:"mono",editable:"all",baseUrl:E,tools:[]}}function i(t,e,a,r,n,o,s){T.lastIndex=0;for(var i=T.exec(t),l="",u=0;i;){var f=i[0];l+=t.slice(u,i.index),l+=f=(f=o&&s?f.replace(M,' transform="scale('+o+" "+s+')"'):f.replace(M,"")).replace(L,"stroke='"+e+"'").replace(j,"fill='"+a+"'").replace(A,"stroke-width='"+r+"'").replace(H,"stroke-dasharray='"+n+"'"),u=T.lastIndex,i=T.exec(t)}return u<t.length&&(l+=t.slice(u)),l}function l(t,e,a,r,n,o,s){var i=Math.sqrt(Math.pow(a-t,2)+Math.pow(r-e,2)),l=Math.sqrt(Math.pow(n-a,2)+Math.pow(o-r,2)),u=i/(i+l),f=l/(i+l),p=s*(u=isNaN(u)?0:u),c=s*(f=isNaN(f)?0:f);return[a-p*(n-t),r-p*(o-e),a+c*(n-t),r+c*(o-e)]}function u(t,e){function a(t,e){var a=K[t];if(a)e(a);else{var r=t.split("?")[0].split("/").pop(),n=r.split(".");"json"===n[n.length-1]&&n.pop(),"svg"===n[n.length-1]&&n.pop(),r=n.join(".");var o=document.head||document.getElementsByTagName("head")[0]||document.documentElement,s=document.createElement("script");s.async="async",s.src=t,s.onload=s.onreadystatechange=function(){if(!s.readyState||/loaded|complete/.test(s.readyState)){s.onload=s.onreadystatechange=null,o&&s.parentNode&&o.removeChild(s),s=void 0;var a=_.$svg[r]||null;a&&(K[t]=a),e(a)}},o.insertBefore(s,o.firstChild)}}var r=t.length,n=0,o=0;0!=r?t.forEach(function(t,s){var i=t[1];a(i,function(a){t[1]=a,a?o+=1:(console.log("warning: read failed ("+i+")"),n+=1),n+o>=r&&e(0==n)})}):e()}function f(t){var e=t.state["svg.cfg"];if(Array.isArray(e)&&!(e.length<3)){t.state.marked;for(var a=t.state.stroke||3,r=t.state.style||{},n=r.strokeColor||"#888",o=r.fillColor||"#eee",s=e.slice(2),f=s.length,p=[],c=0;c<f;c++){var d=s[c];"string"==typeof d&&p.push([c,d])}u(p,function(r){if(r){for(B=p.length-1;B>=0;B--){var u=p[B];s[u[0]]=u[1]}var c=e[0],d=!1;c>=8&&(d=!0,c-=8);var g=e[1],h="";Array.isArray(g)&&g.length>=1?h=g[0]:g=null;var v=t.state.width,y=t.state.height;if(isNaN(v)||v<0)v=200;else if(v<1){var m=t.state.parentWidth;v=isNaN(m)?200:v>=.9999?m:v*m}if(isNaN(y)||y<0)y=60;else if(y<1){var _=t.state.parentHeight;y=isNaN(_)?60:y>=.9999?_:y*_}if(1==f&&c>=0){var w,b,k=(N=s[0]).svg,O=N.width,I=N.height;return N.scalable?(w=0,b=0):(w=v/O,b=y/I),k="<svg "+(_t='width="'+v+'" height="'+y+'" viewPort="0 0 '+O+" "+I+'" ')+'version="1.1" xmlns="http://www.w3.org/2000/svg">'+k+"</svg>",k=i(k,n,o,a,h,w,b),k='url("data:image/svg+xml;base64,'+P.Base64.encode(k)+'")',void(t.duals.style={backgroundImage:k})}if((-1==c||-2==c)&&g&&1==f){var N=s[0],S=g.length;if(S<8)return;var E=t.parentOf(!0),D="mrk_";if(E){var T=E.state.defId;T&&(D=T)}D+=t.$gui.keyid+"";var M=g[2],L=g[3],j="stroke-dasharray='"+h+"' ",A="",H="";if(M>=1){var K="mrk"+M+"_start";if(!(H=N[K]))return;var $=D+"_start";H=H.replace(K,$),A="marker-start='url(#"+$+")' "}var G="",W="";if(L>=1){var z="mrk"+L+"_end";if(!(W=N[z]))return;var q=D+"_end";W=W.replace(z,q),G="marker-end='url(#"+q+")' "}var X=Math.floor(2.5*a+.5);if(X*=C,v<=X+X||y<=X+X)return;for(var O=0,I=0,B=5;B<S;B+=2){var Y=g[B-1],F=g[B];Y>O&&(O=Y),F>I&&(I=F)}for(var R=0==O?0:(v-X-X)/O,U=0==I?0:(y-X-X)/I,Z=[],J=void 0,V=void 0,B=5;B<S;B+=2){var Q=g[B-1]*R+X,tt=g[B]*U+X;J===Q&&V===tt||(Z.push(Q,tt),J=Q,V=tt)}var et="",at="";if(-1==c)for(var rt=Z.length,B=1;B<rt;B+=2)B>1&&(et+=" "),et+=Z[B-1]+","+Z[B];else if(4==(rt=Z.length))at="M"+Z[0]+" "+Z[1]+"L"+Z[2]+" "+Z[3];else{Z.unshift(void 0,void 0),rt+=2;var nt=Z[2],ot=Z[3];for(at="M"+nt+" "+ot,B=3;B<rt;B+=2){var st=l(B<=3?Z[B-1]:Z[B-3],B<=3?Z[B]:Z[B-2],bt=Z[B-1],Pt=Z[B],ht=B>=rt-1?bt:Z[B+1],yt=B>=rt-1?Pt:Z[B+2],x);at+="C"+nt+" "+ot+" "+st[0]+" "+st[1]+" "+bt+" "+Pt,nt=st[2],ot=st[3]}}return k="<svg "+(_t='width="'+v+'" height="'+y+'" viewPort="0 0 '+v+" "+y+'" ')+'version="1.1" xmlns="http://www.w3.org/2000/svg">',k+="<g stroke='"+n+"' fill='"+o+"' "+j+"stroke-width='"+a+"'>",(H||W)&&(k+="<defs>"+H+W+"</defs>"),k+=-1==c?"<polyline "+A+G+"fill='rgba(0,0,0,0)' points='"+et+"'/>":"<path "+A+G+"fill='rgba(0,0,0,0)' d='"+at+"'/>",k+="</g></svg>",k=i(k,n,o,a,h),k='url("data:image/svg+xml;base64,'+P.Base64.encode(k)+'")',void(t.duals.style={backgroundImage:k})}if(2!=f){if(3==f){var N=s[0],it=s[1],lt=s[2],k=N.svg,ut=it.svg,ft=lt.svg,O=N.width,I=N.height,pt=it.width,ct=it.height,dt=lt.width,gt=lt.height;if(1==c){if(I!=ct||ct!=gt)return;var ht,vt=I*v/y;if(d){if(Y=O,bt=vt-O-dt,ht=dt,bt<=0)return;k=k+(ut='<g transform="translate('+(Y-1)+",0) scale("+(bt+2)/pt+',1)">'+ut+"</g>")+(ft='<g transform="translate('+(Y+bt)+',0)">'+ft+"</g>")}else{if(Y=(vt-pt)*O/(O+dt),bt=pt,ht=vt-Y-pt,Y<=0||ht<=0)return;k=(k='<g transform="scale('+(Y+1)/O+',1)">'+k+"</g>")+(ut='<g transform="translate('+Y+',0)">'+ut+"</g>")+(ft='<g transform="translate('+(Y+bt-1)+",0) scale("+(ht+1)/dt+',1)">'+ft+"</g>")}k=i(k="<svg "+(_t='width="'+v+'" height="'+y+'" viewPort="0 0 '+vt+" "+I+'" ')+'version="1.1" xmlns="http://www.w3.org/2000/svg"><g transform="scale('+(wt=y/I)+","+wt+')">'+k+"</g></svg>",n,o,a,h),k='url("data:image/svg+xml;base64,'+P.Base64.encode(k)+'")',t.duals.style={backgroundImage:k}}else if(2==c){if(O!=pt||pt!=dt)return;var yt,mt=O*y/v;if(d){if(F=I,Pt=mt-I-gt,yt=gt,Pt<=0)return;k=k+(ut='<g transform="translate(0,'+(F-1)+") scale(1,"+(Pt+2)/ct+')">'+ut+"</g>")+(ft='<g transform="translate(0,'+(F+Pt)+')">'+ft+"</g>")}else{if(F=(mt-ct)*I/(I+gt),Pt=ct,yt=mt-F-Pt,F<=0||yt<=0)return;k=(k='<g transform="scale(1,'+(F+1)/I+')">'+k+"</g>")+(ut='<g transform="translate(0,'+F+')">'+ut+"</g>")+(ft='<g transform="translate(0,'+(F+Pt-1)+") scale(1,"+(yt+1)/gt+')">'+ft+"</g>")}var _t='width="'+v+'" height="'+y+'" viewPort="0 0 '+O+" "+mt+'" ',wt=v/O;k=i(k="<svg "+_t+'version="1.1" xmlns="http://www.w3.org/2000/svg"><g transform="scale('+wt+","+wt+')">'+k+"</g></svg>",n,o,a,h),k='url("data:image/svg+xml;base64,'+P.Base64.encode(k)+'")',t.duals.style={backgroundImage:k}}}}else{var N=s[0],it=s[1],k=N.svg,ut=it.svg,O=N.width,I=N.height,pt=it.width,ct=it.height;if(1==c){if(I!=ct)return;var bt,vt=I*v/y;if(d){if(Y=O,(bt=vt-O)<=0)return;k+=ut='<g transform="translate('+(Y-1)+",0) scale("+(bt+1)/pt+',1)">'+ut+"</g>"}else{if(Y=vt-pt,bt=pt,Y<=0)return;k='<g transform="scale('+(Y+1)/O+',1)">'+k+"</g>",k+=ut='<g transform="translate('+Y+',0)">'+ut+"</g>"}k=i(k="<svg "+(_t='width="'+v+'" height="'+y+'" viewPort="0 0 '+vt+" "+I+'" ')+'version="1.1" xmlns="http://www.w3.org/2000/svg"><g transform="scale('+(wt=y/I)+","+wt+')">'+k+"</g></svg>",n,o,a,h),k='url("data:image/svg+xml;base64,'+P.Base64.encode(k)+'")',t.duals.style={backgroundImage:k}}else if(2==c){if(O!=pt)return;var Pt,mt=O*y/v;if(d){if(F=I,(Pt=mt-I)<=0)return;k+=ut='<g transform="translate(0,'+(F-1)+") scale(1,"+(Pt+1)/ct+')">'+ut+"</g>"}else{if(F=mt-ct,Pt=ct,F<=0)return;k='<g transform="scale(1,'+(F+1)/I+')">'+k+"</g>",k+=ut='<g transform="translate(0,'+F+')">'+ut+"</g>"}k=i(k="<svg "+(_t='width="'+v+'" height="'+y+'" viewPort="0 0 '+O+" "+mt+'" ')+'version="1.1" xmlns="http://www.w3.org/2000/svg"><g transform="scale('+(wt=v/O)+","+wt+')">'+k+"</g></svg>",n,o,a,h),k='url("data:image/svg+xml;base64,'+P.Base64.encode(k)+'")',t.duals.style={backgroundImage:k}}}}})}}function p(t){var e={};return t.split("&").forEach(function(t){if(t){var a=t.split("="),r=a[0].trim();r&&(e[r]=(a[1]||"").trim())}}),e}function c(){var t=p(window.location.search.slice(1)),e=[],a=/-(.)/g;return Object.keys(t).forEach(function(r){var n=t[r],o=r.replace(a,function(t,e){return e.toUpperCase()});if(r!=o&&(e.push(r),r=o),n)if((n=decodeURIComponent(n)).length<=48){var s=parseFloat(n);t[r]="number"==typeof s&&s+""===n?s:n}else t[r]=n;else t[r]=1}),e.forEach(function(e){delete t[e]}),t}function d(t){if(t.parentNode){var e=t.querySelector('div.rewgt-center > [class*="prebuild-"]');if(e){var a=(e.getAttribute("data-prepost")||"").split("-");a.length>=5&&parseInt(a[4])&&g(P.pageCtrl,P.pageCtrl.pageIndex,!0)}}}function g(t,e,a){function r(){var a,r=Y-q,n=Y+q+B,o=n+q+q+B,i=r-q-q-B,u=i-q-q-B,f=null,p="";if(U.forEach(function(a,l){var c=!1;a.duals.top=s,l<=e?l==e?(a.duals.left=r,f=a,p=t.keys[e]):l==e-1?a.duals.left=i:l==e-2?a.duals.left=u:c=!0:l==e+1?a.duals.left=n:l==e+2?a.duals.left=o:c=!0,c?(a.duals.left=r,"none"!=a.state.style.display&&(a.duals.style={display:"none"})):"block"!=a.state.style.display&&(a.duals.style={display:"block"})}),f&&p&&(t.pageIndex=e,a=f.getHtmlNode())){var c=document.createEvent("Event");c.initEvent("slideenter",!0,!0),c.pageKey=p,c.pageIndex=e,a.dispatchEvent(c),setTimeout(function(){if(!("function"==typeof c.isDefaultPrevented?c.isDefaultPrevented():!!c.defaultPrevented)){var e=(Z[p]||0)+1;Z[p]=e,l?setTimeout(function(){t.enterPage(c,f,1==e)},1e3):t.enterPage(c,f,1==e)}},0)}}if(t.keys.length)if(V){var n=!1;if((w=V.parentOf(!0))&&"function"==typeof V.stepIsDone?V.stepIsDone()&&(n=!0,V=null):V=null,V)return void setTimeout(function(){g(t,e,a)},600);if(n){var o=w&&w.getHtmlNode();o&&d(o)}}else{var s=(F=Math.floor(window.innerHeight/2))-X,i=t.pageIndex,l=!1;if(0==R){l=!0,i=-1,R=1,U=[],N.classList.add("no-trans"),setTimeout(function(){N.classList.remove("no-trans")},1200);var u=q+q,f=X+X,p=[],c={};t.keys.forEach(function(t){var e=S[t];if(e&&(e=e.component)){var a=e.props.name;a&&"string"==typeof a&&(c[a]=U.length),U.push(e),p.push(t)}}),t.keys=p,t.namedPage=c;var v=[];U.forEach(function(e,a){var r=t.initPage(e,p[a],a,u,f,s);Q.apply(v,r)}),setTimeout(function(){v.forEach(function(t){P.addClass(t[0],t[1])})},1e3)}else R+=1;var y=void 0===e?"undefined":h(e);if("string"==y){var m=parseInt(e);m+""==e?(e=m,y="number"):y=void 0===(e=t.namedPage[e])?"undefined":h(e)}if("number"==y){var _=t.keys.length;if(_&&(e>=_&&(e=_-1),e<0&&(e=0),e!==i||a)){if(a&&i>=0){var w=U[i];if(w&&!w.whenSlideLeave())return void(J&&V&&setTimeout(function(){g(t,e,a)},300))}l?setTimeout(function(){r()},0):r()}}}}var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),y=function t(e,a,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,a);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,a,r)}if("value"in n)return n.value;var s=n.get;if(void 0!==s)return s.call(r)},m=t("react"),_=(t("react-dom"),t("shadow-widget")),w=_.$templates,b=_.$creator,P=_.$utils,k=(_.$ex,_.$main),O="",I="",x=.4;!function(){var t=P.vendorId||[],e=t[0]||"";"ie"==e?(O="MSTransitionEnd",t[1]?I="transform":(I="msTransform",console.log("!warning: IE version too low, please use IE11 or higher"))):"firefox"==e?(O="transitionend",I="transform"):"opera"==e?(O="oTransitionEnd",I="transform"):"chrome"==e||"safari"==e||"webkit"==e?(O="webkitTransitionEnd",I="WebkitTransform"):console.log("!fatal error: unknown web browser type")}(),w.rewgt||(w.rewgt={});var N=null,S=null,E="/app/rewgt/shadow-slide/web/output",C=4,D=function(t){function e(t,a){r(this,e);var o=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t||"rewgt.DrawPaper",a));return o._statedProp.push("defId","offsetX","offsetY"),o._defaultProp.height=.9999,o._defaultProp.minHeight=0,o._defaultProp.offsetX=0,o._defaultProp.offsetY=0,o._silentProp.push("drawPaper."),o}return o(e,w.Div_),v(e,[{key:"_getGroupOpt",value:function(t){var e=s(),a=t._._tools;return e.editable=t.props["data-inline"]?"all":"none",a&&(e.tools=a),e}},{key:"_getSchema",value:function(t,a){a=a||1200;var r=y(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_getSchema",this).call(this,t,a+200);return r.offsetX=[a+1,"number",null,"[number]: N pixels"],r.offsetY=[a+2,"number",null,"[number]: N pixels"],r.defId=[a+3,"string",null,"[string]: SVG marker ID"],r}},{key:"getDefaultProps",value:function(){var t=y(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultProps",this).call(this);return delete t.minHeight,t.height=.9999,t.minHeight=0,t.offsetX=0,t.offsetY=0,t["drawPaper."]=!0,t}},{key:"getInitialState",value:function(){var t=y(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getInitialState",this).call(this),a=this.props.defId;return a=a&&"string"==typeof a?a.slice(0,32):"_"+Math.floor((new Date).valueOf()/1e3),t.defId=a,t.offsetX=parseInt(this.props.offsetX)||0,t.offsetY=parseInt(this.props.offsetY)||0,this.defineDual("offsetX"),this.defineDual("offsetY"),this.defineDual("id__",function(t,e){if(!(t<=2)){var a={margin:this.state.offsetY+"px 0 0 "+this.state.offsetX+"px"},r=m.createElement("div",{className:"rewgt-paperview",style:a});P.setChildren(this,null,r)}}),t}}]),e}();w.rewgt.DrawPaper_=D,w.rewgt.DrawPaper=new D;var T=/<g\b[^>]* _cfg=[^>]*>/gm,M=/ _cfg=['"].*?["']/m,L=/\bstroke=['"].*?["']/m,j=/\bfill=['"].*?["']/m,A=/\bstroke-width=['"].*?["']/m,H=/\bstroke-dasharray=['"].*?["']/m,K={},$=function(t){function e(t,a){r(this,e);var o=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t||"rewgt.SvgPanel",a));return o._htmlText=!0,o._statedProp.push("svg.cfg","stroke","strentch","rotate"),o._defaultProp.stroke=3,o._defaultProp.width=100,o._defaultProp.height=40,o._defaultProp.strentch="1",o._defaultProp.rotate=0,o}return o(e,w.Panel_),v(e,[{key:"_getGroupOpt",value:function(t){return s()}},{key:"_getSchema",value:function(t,a){a=a||1200;var r=y(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_getSchema",this).call(this,t,a+200);return r.stroke=[a+1,"number",null,"[number]: draw pan width, N pixels"],r.marked=[a+2,"string",null,"[string]: markdown string"],r.strentch=[a+3,"string",["","1"],"[string]: strentch image"],r.rotate=[a+4,"number",null,"[number]: 0 ~ 360"],r}},{key:"getDefaultProps",value:function(){var t=y(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultProps",this).call(this);return t.stroke=3,t.width=100,t.height=40,t.strentch="1",t.rotate=0,t}},{key:"willResizing",value:function(t,e,a){var r=this.state.stroke;return r&&(this.state.stroke=0,this.duals.stroke=r),!0}},{key:"getInitialState",value:function(){function t(t,e){o=!0,setTimeout(function(){o&&(o=!1,n.isHooked&&f(n))},0)}var a=y(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getInitialState",this).call(this),r=!1;_.__design__?r=!0:function(t){var e=t.parentOf(!0);return!!(e&&e.props["data-design"]&&e.props["drawPaper."])}(this)&&(r=!0),r&&this.$gui.hasIdSetter&&(this.undefineDual("id__"),this.$gui.hasIdSetter=!1),r&&(this.props.style=Object.assign({},this.props.style));var n=this,o=!1;return this.defineDual("html.",function(t,e){if(r){var a=this.state["html."]=t||"";a&&(this.componentOf("txt")||setTimeout(function(){var t=P.loadElement(["MarkedDiv",{key:"txt","html.":a,width:.9999,klass:"default-large-small p1-p2-p3-p0 align_center-right-default"}]);n.setChild(t,function(){var t=n.componentOf("txt");t&&t.listen("id__",function(e,a){e<=2||(n.state["html."]=t.state["html."]||"")})})},0))}}),this.defineDual("svg.cfg",function(e,a){Array.isArray(e)&&t()}),this.defineDual("strentch",function(t,e){var a=this.state.strentch="0"===t?"":t?"1":"";a&&(a="100% 100%"),this.state.style=Object.assign({},this.state.style,{backgroundSize:a})}),this.defineDual("stroke",function(e,a){this.state.stroke=parseInt(e)||3,t()}),this.defineDual("style",function(e,a){var n=!1;e.strokeColor&&(r&&(this.props.style.strokeColor=e.strokeColor),n=!0),e.fillColor&&(r&&(this.props.style.fillColor=e.fillColor),n=!0),n&&t()}),this.defineDual("rotate",function(t,e){var a=this.state.rotate=parseInt(t)||0;(this.state.style=Object.assign({},this.state.style))[I]=0==a?"":"rotate("+a+"deg)"}),this.listen("width",t),this.listen("height",t),a}}]),e}();w.rewgt.SvgPanel_=$,w.rewgt.SvgPanel=new $;var G=function(t){function e(t,a){r(this,e);var o=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t||"rewgt.PlayShell",a));return o._defaultProp["step.play"]=!0,o._htmlText=!1,o}return o(e,w.P_),v(e,[{key:"_getSchema",value:function(t,a){a=a||1200;var r=y(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_getSchema",this).call(this,t,a+200);return r["data-auto"]=[a+1,"string",["","1"],'[string]: auto play when page enter, "" or "1"'],r}},{key:"getDefaultProps",value:function(){var t=y(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultProps",this).call(this);return t["step.play"]=!0,t["data-auto"]="",t}},{key:"stepPlay",value:function(t){if(!_.__design__){var e=this.componentOf("player");e&&"function"==typeof e.stepPlay&&e.stepPlay(t)}}},{key:"stepPause",value:function(t){if(!_.__design__){var e=this.componentOf("player");e&&"function"==typeof e.stepPause&&e.stepPause(t)}}},{key:"stepIsDone",value:function(){if(!_.__design__){var t=this.componentOf("player");if(t&&"function"==typeof t.stepIsDone)return t.stepIsDone()}return!0}},{key:"playOnEnter",value:function(){var t=this.state["data-auto"];return"true"==t||!!parseInt(t)}}]),e}();w.rewgt.PlayShell_=G,w.rewgt.PlayShell=new G;var W=function(t){function e(t,a){r(this,e);var o=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t||"rewgt.GotoPage",a));return o._defaultProp["step.play"]=!0,o}return o(e,w.Div_),v(e,[{key:"_getGroupOpt",value:function(t){return s()}},{key:"_getSchema",value:function(t,a){a=a||1200;var r=y(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_getSchema",this).call(this,t,a+200);return r["data-goto"]=[a+1,"string",null,"[string]: +N, -N, N, or named_page"],r}},{key:"getDefaultProps",value:function(){var t=y(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultProps",this).call(this);return t["step.play"]=!0,t["data-goto"]="+1",t["html."]="GotoPage",t}},{key:"stepPlay",value:function(t){if(!_.__design__){var e=this;setTimeout(function(){var t=!1,a=!1,r=e.state["data-goto"]||"";"+"==r[0]?(t=!0,r=r.slice(1)):"-"==r[0]&&(a=!0,r=r.slice(1));var n=parseInt(r);if(!isNaN(n)||t||a||(n=P.pageCtrl.namedPage[r]),!isNaN(n)){var o=P.pageCtrl.pageIndex;o=t?o+n:a?o-n:n,P.pageCtrl.gotoPage(o)}},300)}}},{key:"stepPause",value:function(t){}},{key:"stepIsDone",value:function(){return!0}},{key:"playOnEnter",value:function(){return!1}},{key:"$onClick",value:function(t){if(!_.__design__&&!P.hasClass(this,"hidden-default")){for(var e=this.getHtmlNode(),a=t.target,r="";a&&!(r=a.getAttribute("data-goto")||"")&&a!==e&&a!==document;)a=a.parentNode;r&&(e!==a&&(this.duals["data-goto"]=r),this.stepPlay(0))}}}]),e}();w.rewgt.GotoPage_=W,w.rewgt.GotoPage=new W;var z=function(t){function e(t,a){r(this,e);var o=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t||"rewgt.DelayTimer",a));return o._defaultProp["step.play"]=!0,o}return o(e,w.P_),v(e,[{key:"_getGroupOpt",value:function(t){return s()}},{key:"_getSchema",value:function(t,a){a=a||1200;var r=y(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_getSchema",this).call(this,t,a+200);return r["data-delay"]=[a+1,"string",null,"[string]: 0 or N seconds"],r["data-auto"]=[a+2,"string",["","1"],'[string]: auto delay when page enter, "" or "1"'],r}},{key:"getDefaultProps",value:function(){var t=y(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultProps",this).call(this);return t["step.play"]=!0,t["data-delay"]="0",t["data-auto"]="",t}},{key:"getInitialState",value:function(){var t=y(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getInitialState",this).call(this);return this.canAct=!0,this.isDone=!1,t}},{key:"stepPlay",value:function(t){if(!_.__design__){var e=parseInt(this.state["data-delay"])||0;if(0===e&&(e=t||0),!isNaN(e)){this.canAct=!0,this.isDone=!1;var a=this;setTimeout(function(){a.isDone=!0;var t,e,r=a.canAct;r&&a.$onClick&&(t=a.getHtmlNode())&&"hidden"!=window.getComputedStyle(t).visibility&&((e=document.createEvent("Event")).target_=t,a.$onClick(e)),r&&Array.isArray(a.state.trigger)&&P.fireTrigger(a)},1e3*e)}}}},{key:"stepPause",value:function(t){this.canAct=!1}},{key:"stepIsDone",value:function(){return this.isDone}},{key:"playOnEnter",value:function(){var t=this.state["data-auto"];return"true"==t||!!parseInt(t)}}]),e}();w.rewgt.DelayTimer_=z,w.rewgt.DelayTimer=new z;var q=450,X=350,B=100,Y=Math.floor(window.innerWidth/2),F=Math.floor(window.innerHeight/2),R=0,U=[],Z={},J=null,V=null,Q=Array.prototype.push,tt=[0,0,0,0],et=["-prebuild-1","-prebuild-2","-prebuild-3","-prebuild-4","-prebuild-5"],at=[],rt=!0;k.$onLoad.push(function(){function t(){if(U.length&&f.autoplay&&"number"==typeof f.autoplay){if(u.pageIndex>=U.length-1){if(!f.loopback)return;rt=!1,N.classList.add("no-trans");for(var a=at.length-1;a>=0;a--){var r=at[a];if(r.widget&&r.isHooked&&r.widget.parent){V&&(e(V,!0),V=null);var n=(r.state.margin||tt).slice(0);n[0]=r.oldMarginT||0,n[3]=r.oldMarginL||0;var o={opacity:"",zIndex:(r.oldZindex||0)+""};o[I]="",r.duals.margin=n,r.duals.style=o}else at.splice(a,1)}setTimeout(function(){N.classList.remove("no-trans"),R=0,Z={},J=null,V=null,u.gotoPage(0)},300)}else u.gotoPage(u.pageIndex+1);setTimeout(t,1e3*f.autoplay)}}function e(t,e){var a=t.widget;a&&a.parent&&"function"==typeof t.stepPause&&t.stepPause(e?"JUMP_PAGE":"NEXT_PAGE")}function a(t){var e=t.state["data-prepost"],a="";if(!e)return a;var r=e.split("-");if(r.length>=2){var n=parseInt(r[0]),o=parseInt(r[1]);if(isNaN(n)||!(o>=1&&o<=5))return a;if(t.oldZindex=parseInt((t.state.style||{}).zIndex)||0,0==n||18==n||19==n){if(0==n&&r.length>=4){var s=parseInt(r[2]);13==s?t.duals.style={opacity:"0"}:11!=s&&12!=s||(t.duals.style={opacity:"0.98"})}var i=t.state.margin||tt;a="prebuild-"+o,t.oldMarginL=i[3],t.oldMarginT=i[0]}else if(n>=1&&n<=17){var l=t.state.left||0,u=t.state.top||0,f=t.state.width||200,p=t.state.height||0;if(!p){var c=t.getHtmlNode();c&&(p=c.clientHeight||100)}var d=(i=(t.state.margin||tt).slice(0))[3],g=i[0];if(n<=4)1==n?i[0]=-X-u-p:2==n?i[3]=q-l:3==n?i[0]=X-u:i[3]=-q-l-f,t.duals.margin=i,t.duals.style={opacity:"0"};else if(n<=8){var h={opacity:"0"};5==n?(i[0]=-X-u-p,i[3]=q-l,h[I]="rotate(-215deg) scale(0.2,0.2)"):6==n?(i[0]=X-u,i[3]=q-l,h[I]="rotate(215deg) scale(0.2,0.2)"):7==n?(i[0]=X-u,i[3]=-q-l-f,h[I]="rotate(-215deg) scale(0.2,0.2)"):(i[0]=-X-u-p,i[3]=-q-l-f,h[I]="rotate(215deg) scale(0.2,0.2)"),t.duals.margin=i,t.duals.style=h}else 9==n?((h={opacity:"0"})[I]="scale(0.1,0.1)",t.duals.style=h):10==n?((h={opacity:"0"})[I]="rotate(1800deg) scale(0.1,0.1)",t.duals.style=h):n<=13?t.duals.style=13==n?{opacity:"0"}:{opacity:"0.98"}:14==n?((h={})[I]="scale(0.6,0.6)",t.duals.style=h):15==n?((h={})[I]="scale(0.8,0.8)",t.duals.style=h):16==n?((h={})[I]="scale(1.2,1.2)",t.duals.style=h):((h={})[I]="scale(1.4,1.4)",t.duals.style=h);a="prebuild-"+o,t.oldMarginL=d,t.oldMarginT=g}}return a}function r(){var t,a,r=!1,u=this.getHtmlNode();if(u&&(t=this.widget)){if(J){if(J.parentNode){if(a=J.querySelector(".build > .to-build"))return i(t,a),!1;l(t,J)&&(r=!0)}J=null}var f=u.querySelectorAll('div.rewgt-center > [class*="prebuild-"]');if(a=f[0]){var p=null,c=a.getAttribute("data-prepost")||"";if(0==c.indexOf("0-")){var d=[a];a=null;for(var g,h=1;g=f[h];h++){if(0!=(N=g.getAttribute("data-prepost")||"").indexOf("0-")){a=g,c=N,p=f[h+1];break}d.push(g)}d.forEach(function(e){l(t,e)&&(r=!0)})}else p=f[1];var v=a&&P.keyOfNode(a);if(v){var y=t[v];if((y=y&&y.component)&&(J=y.getHtmlNode())){var m=c.split("-"),_=m[0],w={opacity:""},b=(y.state.margin||tt).slice(0);b[0]=y.oldMarginT||0,b[3]=y.oldMarginL||0,w[I]="";var k=!1;if("11"==_)w.zIndex=o(t)+"";else if("12"==_)w.zIndex=s(t)+"";else if("18"==_){if(k=!0,"function"==typeof y.stepPlay){var x=parseInt(m[1]||"3");y.stepPlay(x);var N=p&&p.getAttribute("data-prepost");N&&parseInt(N.split("-")[4])&&(V=y)}}else"19"==_&&(k=!0,"function"==typeof y.stepPause&&y.stepPause("PRE_STEP"));return k?P.removeClass(y,["prebuild-1","prebuild-2","prebuild-3","prebuild-4","prebuild-5"]):J.addEventListener(O,n(!0,t),!1),y.duals.margin=b,y.duals.style=w,!1}}}if(a=u.querySelector(".build > .to-build"))return i(t,a),!1}return!r&&V&&(e(V,!1),V=null),!r}function n(t,e){var a=function(r){var n=r.target;n.removeEventListener(O,a),a=null;var o=e.parent&&e.component;if(o=o&&o.getHtmlNode()){var s=P.keyOfNode(n),i=s&&e[s];(i=i&&i.component)&&(t?(P.removeClass(i,["prebuild-1","prebuild-2","prebuild-3","prebuild-4","prebuild-5"]),setTimeout(function(){d(o)},300)):P.removeClass(i,["postbuild-1","postbuild-2","postbuild-3","postbuild-4","postbuild-5"]))}};return a}function o(t){var e=-999,a=0;return P.eachElement(t.component,function(r){var n,o=P.keyOfElement(r);if(o&&(n=t[o])&&(n=n.component)){a+=1;var s=parseInt(n.state.style.zIndex||"0");s>e&&(e=s)}}),0==a?0:e>=999?999:e+1}function s(t){var e=999,a=0;return P.eachElement(t.component,function(r){var n,o=P.keyOfElement(r);if(o&&(n=t[o])&&(n=n.component)){a+=1;var s=parseInt(n.state.style.zIndex||"0");s<e&&(e=s)}}),0==a?0:e<=-999?-999:e-1}function i(t,e){var a=e.parentNode;if(!a.parentNode.classList.contains("rewgt-static")){var r=P.keyOfNode(a),n=P.keyOfNode(e),o=r&&t[r];if(o=o&&n&&o[n],o=o&&o.component)return void P.removeClass(o,"to-build")}e.classList.remove("to-build")}function l(t,e){function a(){var a=i.state.left||0,r=i.state.top||0,n=i.state.width||200,l=i.state.height||0;l||(l=e.clientHeight||100);var f=(i.state.margin||tt).slice(0);if(u<=4)1==u?f[0]=-X-r-l:2==u?f[3]=q-a:3==u?f[0]=X-r:f[3]=-q-a-n,i.duals.margin=f,i.duals.style={opacity:"0"};else if(u<=8){var p={opacity:"0"};5==u?(f[0]=-X-r-l,f[3]=q-a,p[I]="rotate(-215deg) scale(0.2,0.2)"):6==u?(f[0]=X-r,f[3]=q-a,p[I]="rotate(215deg) scale(0.2,0.2)"):7==u?(f[0]=X-r,f[3]=-q-a-n,p[I]="rotate(-215deg) scale(0.2,0.2)"):(f[0]=-X-r-l,f[3]=-q-a-n,p[I]="rotate(215deg) scale(0.2,0.2)"),i.duals.margin=f,i.duals.style=p}else 9==u?((p={opacity:"0"})[I]="scale(0.1,0.1)",i.duals.style=p):10==u?((p={opacity:"0"})[I]="rotate(1800deg) scale(0.1,0.1)",i.duals.style=p):u<=13?((p={opacity:"0.99"}).zIndex=11==u?o(t)+"":12==u?s(t)+"":(i.oldZindex||0)+"",i.duals.style=p):u<=17&&((p={})[I]=14==u?"scale(0.6,0.6)":15==u?"scale(0.8,0.8)":16==u?"scale(1.2,1.2)":"scale(1.4,1.4)",i.duals.style=p)}var r=P.keyOfNode(e);if(!r)return!1;var i=t[r];if(!(i=i&&i.component))return!1;var l=(i.state["data-prepost"]||"").split("-");if(l.length>=4){var u=parseInt(l[2]),f=parseInt(l[3]);if(u>=1&&u<=17){if(f>=1&&f<=5)return P.setClass(i,et.concat(["postbuild-"+f])),setTimeout(function(){e.addEventListener(O,n(!1,t),!1),a()},300),!0}else{if(18==u)return P.setClass(i,et),"function"==typeof i.stepPlay&&i.stepPlay(f),!0;if(19==u)return P.setClass(i,et),"function"==typeof i.stepPause&&i.stepPause("POST_STEP"),!0}}return P.setClass(i,et),!1}if(N=b.containNode_,S=b.topmostWidget_,N&&S){var u=P.pageCtrl;if(!u){if(_.__design__)return;u=P.pageCtrl=new b.pageCtrl_([])}var f,p=!1,h=u.leftPanel,v=u.rightPanel;if(h&&v&&u.gotoPage_){var y=!1;f=c(),u.config?f=Object.assign({},u.config,f):y=!0,u.config=f,u.keys.length||(y&&(void 0===f.noSidebar&&(f.noSidebar=!0),void 0===f.noKeypress&&(f.noKeypress=!0)),f.autoplay=!1),h.onclick=function(t){p=!1,u.prevPage()},v.onclick=function(t){p=!0,u.nextPage()},h.classList.add("wdgt-pgctrl"),h.classList.add("left"),v.classList.add("wdgt-pgctrl"),v.classList.add("right"),h.style.opacity="0.1",v.style.opacity="0.1";var m,w=window.innerWidth,k=window.innerHeight,x=!0,E=900,C=700,D=!1;f.size&&2==(m=(f.size+"").split("x")).length&&(E=(E=parseFloat(m[0]))<=0?0:E<=.9999?.9999==E?w:Math.floor(w*E):Math.max(200,E),(C=parseFloat(m[1]))<=0?(C=0,0==E&&(D=!0)):C=C<=.9999?.9999==C?k:Math.floor(k*C):Math.max(160,C),x=!1),D?(q=Math.floor(w/2),X=Math.floor(k/2),B=0):x?(q=w-20<E?Math.floor((w-20)/2):Math.floor(E/2),X=k-16<C?Math.floor((k-16)/2):Math.floor(C/2),B=Math.min(100,w-q-q&4294967294)):(0==E&&(E=w-20),q=Math.floor(E/2),0==C&&(C=k-16),X=Math.floor(C/2),B=Math.min(100,w-q-q&4294967294));var T;if(f.pageGap&&!isNaN(T=parseInt(f.pageGap))&&T>0&&(B=T),f.backgroundColor){var M=S.component;M&&(M.duals.style={backgroundColor:f.backgroundColor})}f.noSidebar?u.setDisplay({leftCtrlWidth:0,rightCtrlWidth:0}):setTimeout(function(){h.style.opacity="0",v.style.opacity="0",setTimeout(function(){h.style.opacity="0.1",v.style.opacity="0.1",setTimeout(function(){h.style.opacity="0",v.style.opacity="0",f.noKeypress||window.focus()},500)},300)},1e3),f.noFrame&&N.classList.add("no-frame"),f.noTrans&&N.classList.add("no-trans"),f.noGround&&N.classList.add("no-ground"),f.noKeypress||document.addEventListener("keydown",function(t){var e=t.keyCode,a=!1;p=!1,t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?!t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?!t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||(38==e?(u.gotoPage(0),a=!0):40==e&&(u.gotoPage(P.pageCtrl.keys.length-1),a=!0)):36==e?(u.gotoPage(0),a=!0):35==e&&(u.gotoPage(P.pageCtrl.keys.length-1),a=!0):39==e||40==e||34==e||13==e||32==e?(p=!0,u.nextPage(),a=!0):37!=e&&38!=e&&33!=e||(u.prevPage(),a=!0),a&&t.preventDefault()},!1),f.autoplay&&f.loopback||(rt=!1),u.renewPages=function(t){var e=[],a={},r=[],n=[],o=u.keys,s=u.pageIndex;if(t.forEach(function(t){var o=t[0],s=t[1];parseInt(o)+""!==o&&(a[o]=e.length),s.whenSlideLeave||n.push([o,s,e.length]),e.push(o),r.push(s)}),o.forEach(function(t){e.indexOf(t)<0&&delete Z[t]}),n.length&&R>0){N.classList.add("no-trans"),setTimeout(function(){N.classList.remove("no-trans")},100);var i=(F=Math.floor(window.innerHeight/2))-X,l=q+q,f=X+X,p=[];n.forEach(function(t){var e=t[0],a=t[1],r=t[2],n=u.initPage(a,e,r,l,f,i);Q.apply(p,n)}),p.forEach(function(t){P.addClass(t[0],t[1])})}var c,d=o[s],g="string"==typeof d;if(u.keys=e,u.namedPage=a,U=r,g&&(c=e.indexOf(d))>=0)u.pageIndex=c;else{var h=0;if(g)for(var v=s-1;v>=0;v--){var y=o[v];if(y&&(c=e.indexOf(y))>=0){h=v;break}}e.length?setTimeout(function(){u.gotoPage(h)},300):u.pageIndex=0}},u.gotoPage_=function(t,e){var a=t[e],r=U[e];return a&&r?(g(u,e,p),p=!1,[a,r.widget]):["",null]},u.isFirstEnter=function(t){if(!t||!t.classList.contains("rewgt-scene"))return!1;var e=P.keyOfNode(t);return!!e&&(Z[e]||0)<1},u.initPage=function(t,e,n,o,s,i){var l=[];t.whenSlideLeave||(t.whenSlideLeave=r);var u,f=t.getHtmlNode();if(f&&(u=t.widget)){for(var p=f.querySelectorAll("div.rewgt-center > [data-prepost]"),c=0;g=p[c];c++)if((e=P.keyOfNode(g))&&(_=(_=u[e])&&_.component)){var d=a(_);d&&(rt&&at.push(_),l.push([_,d]))}p=f.querySelectorAll(".rewgt-static > .build, .rewgt-center > .build");for(var g,c=0;g=p[c];c++){var e,h=g.parentNode.classList.contains("rewgt-static"),v=null;!h&&(e=P.keyOfNode(g))&&(v=e&&u[e]);for(var y,m=0;y=g.children[m];m++)if(h)y.classList.add("to-build");else if(v&&(e=P.keyOfNode(y))){var _=v[e];(_=_&&_.component)&&P.addClass(_,"to-build")}}}return t.duals.width=o,t.duals.height=s,t.duals.top=i,t.duals.borderWidth=[1,1,1,1],l},u.enterPage=function(t,a,r){if(!_.__design__){V&&(e(V,!0),V=null),J=null;var n;if(r&&(n=a.getHtmlNode())){var o=!1;if(i=n.querySelector('div.rewgt-center > [class*="prebuild-"]')){var s=(i.getAttribute("data-prepost")||"").split("-");s.length>=5&&parseInt(s[4])&&(o=!0)}for(var i,l=[],u=n.querySelectorAll("div.rewgt-center > *"),f=0;i=u[f];f++)if(i.classList.contains("rewgt-panel")||i.classList.contains("rewgt-unit")){var p=P.keyOfNode(i);p&&l.push(p)}var c;if(l.length&&(c=a.widget)&&setTimeout(function(){l.forEach(function(t){var e=c[t],a=e&&e.component;a&&a.props["step.play"]&&"function"==typeof a.playOnEnter&&a.playOnEnter()&&"function"==typeof a.stepPlay&&a.stepPlay(0)})},300),o){var g=t.target;setTimeout(function(){d(g)},300)}}}};var L=f.page||0;"string"==typeof L&&(L=u.namedPage[L]||0),"number"!=typeof L&&(L=0),u.pageIndex=L,g(u,L,p),f.autoplay&&("number"!=typeof f.autoplay?f.autoplay=0:setTimeout(t,1e3*f.autoplay))}}})});